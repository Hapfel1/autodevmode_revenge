(function(s,o,d){"use strict";let a;function p(){return d.findByProps("settings","ProtoClass")||d.findByProps("getProto","updateProto")||d.findByProps("getUserSettings","setUserSettings")||null}function f(e){try{if(!e)return;if(e?.settings?.proto?.developerMode?.value!==void 0)return!!e.settings.proto.developerMode.value;if(typeof e.getProto=="function"){const t=e.getProto();return!!(t?.developerMode?.value??t?.developerMode)}if(typeof e.getSettings=="function"){const t=e.getSettings();return!!(t?.proto?.developerMode?.value??t?.developerMode)}}catch{}}function T(e,t=!0){try{if(e){const n=["updateProto","updateSettings","setProto","setSettings","updateUserSettingsProto"];for(const r of n)if(typeof e[r]=="function")try{return e[r]({proto:{developerMode:{value:t}}},!0),!0}catch{}}return s.FluxDispatcher.dispatch({type:"USER_SETTINGS_PROTO_UPDATE",settings:{proto:{developerMode:{value:t}}},local:!0}),!0}catch{return!1}}var g={onLoad:function(){o.showToast("Auto DevMode: loaded");const e=p();e||o.showToast("Auto DevMode: settings store not found \u2014 using dispatch fallback");let t=!1;const n=i=>{const c=i?.settings?.proto?.developerMode?.value;c===!0?(t=!0,o.showToast("Auto DevMode: observed developer mode enabled")):c===!1&&(o.showToast("Auto DevMode: observed developer mode disabled \u2014 re-enabling"),setTimeout(r,100))};s.FluxDispatcher.subscribe("USER_SETTINGS_PROTO_UPDATE",n);async function r(){return T(e,!0)||o.showToast("Auto DevMode: attempt to enable failed"),await new Promise(i=>setTimeout(i,300)),f(e)===!0?(t=!0,o.showToast("Auto DevMode: developerMode now enabled"),!0):!1}r(),setTimeout(r,800),setTimeout(r,2e3);const l=12;let u=0;const v=setInterval(async()=>{if(t||u>=l){clearInterval(v),t||o.showToast("Auto DevMode: did not observe dev mode enabled after retries");return}u++,o.showToast(`Auto DevMode: retry ${u}/${l}`),await r()},500);a=()=>{s.FluxDispatcher.unsubscribe("USER_SETTINGS_PROTO_UPDATE",n),clearInterval(v),o.showToast("Auto DevMode: unloaded")}},onUnload:function(){a?.()}};return g})(vendetta.metro.common,vendetta.ui.toasts,vendetta.metro);
